language: generic # undocumented except for https://github.com/travis-ci/docs-travis-ci-com/issues/910
sudo: required

services:
  - docker

env:
  global:
    - DOCKER_USERNAME=findepi
    - IMAGE_NAME=findepi/graalvm

script:
  - ./bin/build.sh
  - docker image ls
  - docker run --rm local-graalvm:latest java -version 2>&1 | grep GraalVM
  # TODO test polyglot

deploy:
  provider: script
  script: ./bin/deploy.sh
  on:
    branch: master
